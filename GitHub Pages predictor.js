async function loadModelData(){try{const t=await fetch("model_data.json");if(!t.ok)throw new Error("Failed to load model data");modelData=await t.json(),console.log("Model data loaded successfully")}catch(e){console.error("Error loading model data:",e),showError("Error loading model data. Please try again later.")}}function makePrediction(){if(document.getElementById("result").style.display="none",document.getElementById("error").style.display="none",document.getElementById("loading").style.display="block",modelData)try{const t=[];for(const e of modelData.feature_names){const o=parseFloat(document.getElementById(e).value);if(isNaN(o))throw new Error(`Invalid value for ${e}`);t.push(o)}const o=predictWithModel(t);document.getElementById("prediction-value").textContent=o;const n=document.getElementById("feature-list");n.innerHTML="";for(let e=0;e<t.length;e++){const o=document.createElement("li");o.innerHTML=`<strong>${modelData.feature_names[e].replace("_"," ").replace(/\b\w/g,e=>e.toUpperCase())}:</strong> ${t[e]} cm`,n.appendChild(o)}document.getElementById("loading").style.display="none",document.getElementById("result").style.display="block"}catch(e){console.error("Error making prediction:",e),showError(e.message||"Error making prediction")}else showError("Model not loaded yet. Please try again in a moment.")}function predictWithModel(e){const t=new Array(modelData.n_classes).fill(0);for(const o of modelData.forest){const n=predictWithTree(o,e);let l=0;for(let e=1;e<n.length;e++)n[e]>n[l]&&(l=e);t[l]++}let o=0;for(let e=1;e<t.length;e++)t[e]>t[o]&&(o=e);return modelData.target_names[o]}function predictWithTree(e,t){let o=0;for(;;){const n=e[o];if(-1===n.feature_index)return n.value;o=t[n.feature_index]<=n.threshold?n.children_left:n.children_right}}function showError(e){const t=document.getElementById("error");t.textContent=e,t.style.display="block",document.getElementById("loading").style.display="none"}let modelData=null;document.addEventListener("DOMContentLoaded",function(){document.getElementById("prediction-form").addEventListener("submit",function(e){e.preventDefault(),makePrediction()}),loadModelData()});